---
title: 2019-03-26工作日记
tags:
  - 工作
categories:
  - work
date: 2019-03-26 14:50:00
---

### 一、系统支付流程
对系统的支付宝支付流程从前端到后台代码走了一遍，其中对后台的二维码（21）和缴费（06）的相关功能点代码进行了详细的阅读。

- 获取二维码：F07210201()
- 查询订单状态（二维码）：F07210202()，selectWechat()
- 门诊费用结算：F07060203()
- 支付失败退还费用:F07210203()

### 二、一个尴尬的小问题
早上的时候在分析门诊费用结算确认F07060203()功能点的时候，在MainService.java中的该方法在操作如下代码时：

```
outpatientSettlementMapper.addOutpatientSettlement(outpatientSettlement);
```
在PLSQL中查询数据的时候发现所操作的表(SST_OUTPATIENTSETTLEMENT)并没有新增表项，恒显示24条数据项。然后通过反复的查看数据源dataSource和数据库用户名和密码等配置均没有发现有错误的地方。最后在无赖之下请求兵哥，原来PLSQL默认一页显示的项目条数为24条，如果需要查看下一页则需要点击界面上的下一页（两个箭头的按钮）按钮才能显示下一页或者更多的数据。....

### 三、封装完成自费缴费业务
对支付流程有了大概的了解之后，完成了自费缴费业务的编码。部分接口数据在HIS接口文档中没有给出，先留空，等具体上线的时候在进行界面或者后天代码的更改。